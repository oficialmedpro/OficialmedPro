# =====================================================
# Vari√°veis de Ambiente N8N - Oficial Med
# =====================================================
# 
# Este √© um arquivo de exemplo. Copie para n8n.env e
# ajuste os valores conforme necess√°rio.
#
# NUNCA commite o arquivo n8n.env no Git!
# =====================================================

## üóÑÔ∏è BANCO DE DADOS POSTGRESQL
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=postgres
DB_POSTGRESDB_PASSWORD=your_postgres_password_here

## üîê SEGURAN√áA
# Gere uma chave √∫nica com: openssl rand -hex 32
# NUNCA altere esta chave ap√≥s o primeiro deploy!
N8N_ENCRYPTION_KEY=your_encryption_key_here_generate_with_openssl_rand_hex_32

## üåê URLS E DOM√çNIOS
N8N_HOST=workflows.oficialmed.com.br
N8N_PROTOCOL=https
N8N_PORT=5678
WEBHOOK_URL=https://webhook.oficialmed.com.br/

## üë§ AUTENTICA√á√ÉO B√ÅSICA
# Altere estas credenciais no primeiro deploy!
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=your_admin_username_here
N8N_BASIC_AUTH_PASSWORD=your_secure_password_here

## üìß CONFIGURA√á√ïES SMTP
N8N_EMAIL_MODE=smtp
N8N_SMTP_HOST=smtp.gmail.com
N8N_SMTP_PORT=465
N8N_SMTP_USER=your_smtp_email_here
N8N_SMTP_PASS=your_smtp_password_here
N8N_SMTP_SENDER=your_smtp_sender_email_here
N8N_SMTP_SSL=true

## üóÉÔ∏è CONFIGURA√á√ïES GERAIS
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=true
N8N_VERSION_NOTIFICATIONS_ENABLED=true
N8N_TEMPLATES_ENABLED=true
N8N_LOG_LEVEL=info
N8N_LOG_OUTPUT=console

## üìÇ CONFIGURA√á√ïES DE EXECU√á√ÉO
EXECUTIONS_DATA_SAVE_ON_ERROR=all
EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=336

## ‚è±Ô∏è TIMEZONE
GENERIC_TIMEZONE=America/Sao_Paulo
TZ=America/Sao_Paulo

## üîß CONFIGURA√á√ïES AVAN√áADAS (OPCIONAL)

# Limitar execu√ß√µes simult√¢neas
# EXECUTIONS_PROCESS=main
# N8N_CONCURRENCY_PRODUCTION_LIMIT=10

# Configurar Redis para cache (opcional)
# QUEUE_BULL_REDIS_HOST=redis
# QUEUE_BULL_REDIS_PORT=6379
# QUEUE_BULL_REDIS_DB=0

# Configurar proxy (se necess√°rio)
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=http://proxy.example.com:8080
# NO_PROXY=localhost,127.0.0.1

# M√©tricas (Prometheus)
# N8N_METRICS=true
# N8N_METRICS_PORT=9464

# Configura√ß√£o de workers (modo queue)
# N8N_QUEUE_MODE=true
# N8N_WORKER_MODE=true

## üìä LIMITES DE RECURSOS

# Limite de tamanho de payload
# N8N_PAYLOAD_SIZE_MAX=16

# Timeout para execu√ß√µes (em segundos)
# EXECUTIONS_TIMEOUT=300
# EXECUTIONS_TIMEOUT_MAX=3600

## üîí SEGURAN√áA ADICIONAL

# Habilitar CORS (se necess√°rio)
# N8N_ALLOW_ORIGIN=https://workflows.oficialmed.com.br

# Restringir acesso a APIs externas
# N8N_BLOCK_ENV_ACCESS_IN_NODE=false

# Desabilitar UI (para modo API only)
# N8N_DISABLE_UI=false

## üåê INTEGRA√á√ïES

# Google OAuth (opcional)
# GOOGLE_OAUTH_CLIENT_ID=
# GOOGLE_OAUTH_CLIENT_SECRET=
# GOOGLE_OAUTH_REDIRECT_URL=https://workflows.oficialmed.com.br/rest/oauth2-credential/callback

# Microsoft OAuth (opcional)
# MICROSOFT_OAUTH_CLIENT_ID=
# MICROSOFT_OAUTH_CLIENT_SECRET=
# MICROSOFT_OAUTH_REDIRECT_URL=https://workflows.oficialmed.com.br/rest/oauth2-credential/callback

# GitHub OAuth (opcional)
# GITHUB_OAUTH_CLIENT_ID=
# GITHUB_OAUTH_CLIENT_SECRET=
# GITHUB_OAUTH_REDIRECT_URL=https://workflows.oficialmed.com.br/rest/oauth2-credential/callback

## üìù NOTAS

# 1. Ap√≥s alterar vari√°veis, fa√ßa redeploy:
#    docker stack deploy -c stack-n8n-oficialmed.yml n8n
#
# 2. Para aplicar mudan√ßas imediatamente:
#    docker service update --force n8n_n8n
#
# 3. Backup regular √© essencial!
#    - Backup do banco de dados PostgreSQL
#    - Backup do volume n8n_data
#
# 4. Documenta√ß√£o oficial:
#    https://docs.n8n.io/hosting/configuration/

